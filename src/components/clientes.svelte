<script lang="ts">
  import { browser } from "$app/environment";
  import Testimonio from "./testimonio.svelte";
  import Carousel from "svelte-carousel";
  import { onMount } from "svelte";

  let carousel: any;
  let testimonios: Array<Array<string>> = [
    [
      "Hannah Schmitt - Pollo Granjero",
      "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cursus nibh mauris, nec turpis orci lectus maecenas. Suspendisse sed magna eget nibh in turpis. Consequat duis diam lacus arcu. Faucibus venenatis felis id augue sit cursus pellentesque enim Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cursus nibh mauris, nec turpis orci lectus maecenas. Suspendisse ",
      "./images/clientes/cliente1.png",
      "12/12/2021",
    ],
    [
      "Nombre 2",
      "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cursus nibh mauris, nec turpis orci lectus maecenas. Suspendisse sed magna eget nibh in turpis. Consequat duis diam lacus arcu. Faucibus venenatis felis id augue sit cursus pellentesque enim Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cursus nibh mauris, nec turpis orci lectus maecenas. Suspendisse ",
      "./images/clientes/cliente1.png",
      "4/04/2022",
    ],
    [
      "Hannah Schmitt - Pollo Granjero",
      "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cursus nibh mauris, nec turpis orci lectus maecenas. Suspendisse sed magna eget nibh in turpis. Consequat duis diam lacus arcu. Faucibus venenatis felis id augue sit cursus pellentesque enim Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cursus nibh mauris, nec turpis orci lectus maecenas. Suspendisse ",
      "./images/clientes/cliente1.png",
      "12/12/2021",
    ],
  ];

  let startingIndex: number = 2;
  $: currentIndex = startingIndex;

  let clientes: Array<Array<string>> = [];

  let carousel_length: number = testimonios.length;

  onMount(() => {
    carousel.goTo(startingIndex);
  });

  $: console.log(currentIndex);

  const handleNextClick = () => {
    currentIndex == carousel_length - 1 ? (currentIndex = 0) : currentIndex++;
    carousel.goToNext();
  };
  const handlePreviousClick = () => {
    currentIndex == 0 ? (currentIndex = carousel_length - 1) : currentIndex--;
    carousel.goToPrev();
  };
</script>

<div class="text-2xl flex flex-col items-center py-12">
  <h2 class="font-poppins font-semibold text-5xl my-2">
    Conoce a nuestros <span class="text-argold">clientes</span>
  </h2>
  <div class="mt-8">
    <svg
      width="107"
      height="4"
      viewBox="0 0 107 4"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <line
        x1="1.63921"
        y1="2.36079"
        x2="104.363"
        y2="2.36079"
        stroke="#B8A150"
        stroke-width="3.27841"
        stroke-linecap="round"
      />
    </svg>
  </div>
  <div class="max-w-5xl mt-6 mrounded-2xl testimonio rounded-2xl">
    {#if browser}
      <Carousel bind:this={carousel} arrows={false} dots={false}>
        {#each testimonios as testimonio}
          <Testimonio
            nombre={testimonio[0]}
            testimonio={testimonio[1]}
            imagen={testimonio[2]}
            fecha={testimonio[3]}
          />
        {/each}
      </Carousel>
    {/if}
  </div>
  <div class="flex mt-12">
    <button class="" on:click={handlePreviousClick}>
      <svg
        width="58"
        height="58"
        viewBox="0 0 58 58"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M36.25 14.5L21.75 29L36.25 43.5"
          stroke="#B8A150"
          stroke-width="5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </button>

    <div class="flex space-x-4 items-center mx-12">
      {#each testimonios as puntito, i}
        {#if i == currentIndex}
          <div>
            <svg
              width="23"
              height="23"
              viewBox="0 0 23 23"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g filter="url(#filter0_d_32_623)">
                <circle cx="11.5" cy="7.5" r="7.5" fill="#B8A150" />
              </g>
              <defs>
                <filter
                  id="filter0_d_32_623"
                  x="0"
                  y="0"
                  width="23"
                  height="23"
                  filterUnits="userSpaceOnUse"
                  color-interpolation-filters="sRGB"
                >
                  <feFlood flood-opacity="0" result="BackgroundImageFix" />
                  <feColorMatrix
                    in="SourceAlpha"
                    type="matrix"
                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                    result="hardAlpha"
                  />
                  <feOffset dy="4" />
                  <feGaussianBlur stdDeviation="2" />
                  <feComposite in2="hardAlpha" operator="out" />
                  <feColorMatrix
                    type="matrix"
                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"
                  />
                  <feBlend
                    mode="normal"
                    in2="BackgroundImageFix"
                    result="effect1_dropShadow_32_623"
                  />
                  <feBlend
                    mode="normal"
                    in="SourceGraphic"
                    in2="effect1_dropShadow_32_623"
                    result="shape"
                  />
                </filter>
              </defs>
            </svg>
          </div>
        {:else}
          <div>
            <svg
              width="15"
              height="15"
              viewBox="0 0 15 15"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <circle cx="7.5" cy="7.5" r="7.5" fill="#C4C4C4" />
            </svg>
          </div>
        {/if}
      {/each}
    </div>
    <button on:click={handleNextClick}>
      <svg
        width="58"
        height="58"
        viewBox="0 0 58 58"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M21.75 43.5L36.25 29L21.75 14.5"
          stroke="#B8A150"
          stroke-width="5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </button>
  </div>
  <img src="./images/clientes/clientes.png" alt="clientes" class="my-24" />
  <p class="font-poppins font-semibold text-3xl max-w-2xl text-center mb-16">
    Tempor hendrerit mattis cras euismod semper id mauris.
  </p>
  <button
    ><svg
      width="186"
      height="46"
      viewBox="0 0 186 46"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <rect width="186" height="46" rx="8" fill="#25CF43" />
      <path
        d="M39.8305 6C30.8747 6 23.5849 13.3352 23.5811 22.3509C23.5802 25.2328 24.3286 28.0459 25.7505 30.5254L23.4453 39L32.0591 36.726C34.4327 38.0289 37.1045 38.7152 39.8238 38.7161H39.8305C48.7852 38.7161 56.075 31.3799 56.0788 22.3643C56.0807 17.995 54.392 13.8868 51.3241 10.7965C48.2562 7.70525 44.1768 6.00191 39.8305 6ZM39.8305 35.9546H39.8248C37.4018 35.9546 35.0244 35.298 32.951 34.0601L32.458 33.7657L27.3471 35.1154L28.711 30.1L28.39 29.5858C27.0384 27.4217 26.3242 24.9202 26.3251 22.3528C26.328 14.8589 32.3868 8.76243 39.8362 8.76243C43.4435 8.76338 46.8343 10.179 49.3836 12.7483C51.9339 15.3167 53.3367 18.732 53.3358 22.3633C53.3329 29.8572 47.2741 35.9546 39.8305 35.9546ZM47.238 25.7757C46.8324 25.5712 44.8359 24.5828 44.4636 24.4461C44.0913 24.3094 43.8206 24.2416 43.5499 24.6507C43.2792 25.0598 42.5013 25.9803 42.2648 26.2527C42.0283 26.5261 41.7909 26.5595 41.3853 26.355C40.9797 26.1504 39.6709 25.7184 38.1208 24.3266C36.9136 23.2437 36.0987 21.9055 35.8622 21.4964C35.6257 21.0872 35.8365 20.8664 36.0407 20.6628C36.2231 20.4803 36.4463 20.1859 36.6495 19.9469C36.8528 19.7079 36.9202 19.5378 37.0551 19.2644C37.19 18.992 37.1225 18.753 37.0209 18.5485C36.9193 18.3439 36.1072 16.3328 35.7691 15.5146C35.4395 14.7184 35.1052 14.8254 34.8554 14.813C34.6189 14.8006 34.3482 14.7987 34.0775 14.7987C33.8068 14.7987 33.367 14.9009 32.9947 15.31C32.6224 15.7192 31.5738 16.7075 31.5738 18.7186C31.5738 20.7298 33.0289 22.673 33.2312 22.9454C33.4344 23.2178 36.0939 27.3452 40.1667 29.1145C41.1355 29.5351 41.8915 29.7865 42.4814 29.9748C43.454 30.2855 44.3392 30.2415 45.0382 30.1363C45.818 30.0188 47.4403 29.148 47.7784 28.1931C48.1166 27.2391 48.1166 26.4209 48.0149 26.2498C47.9133 26.0797 47.6426 25.9774 47.2371 25.7729L47.238 25.7757ZM75.983 25.5262H75.9393L73.2457 14.5893H69.9992L67.2609 25.3924H67.2172L64.7221 14.5893H61.2553L65.4287 30.4613H68.9402L71.5673 19.6573H71.612L74.2838 30.4613H77.7287L81.9687 14.5893H78.5684L75.984 25.5262H75.983ZM92.5448 19.9574C92.2361 19.5502 91.8125 19.2319 91.2759 19.0016C90.7383 18.7731 90.0497 18.6584 89.211 18.6584C88.6221 18.6584 88.019 18.8094 87.3997 19.1144C86.7814 19.4174 86.2742 19.9029 85.8762 20.5701H85.8097V14.5893H82.6744V30.4604H85.8097V24.4366C85.8097 23.2656 86.0006 22.4254 86.3843 21.9131C86.7671 21.4027 87.3854 21.1465 88.2393 21.1465C88.9897 21.1465 89.5121 21.3797 89.8075 21.8471C90.1019 22.3136 90.2491 23.0209 90.2491 23.9692V30.4604H93.3854V23.3918C93.3854 22.6807 93.3217 22.0326 93.1973 21.4466C93.0719 20.8626 92.8554 20.3656 92.5458 19.9574H92.5448ZM105.463 27.9044V21.9255C105.463 21.2278 105.309 20.6686 104.999 20.247C104.69 19.8246 104.293 19.4948 103.808 19.2577C103.321 19.0207 102.784 18.8611 102.195 18.7798C101.606 18.6986 101.025 18.6575 100.451 18.6575C99.8184 18.6575 99.1887 18.7196 98.5637 18.8467C97.9369 18.9729 97.3746 19.1841 96.874 19.4804C96.3735 19.7768 95.9603 20.1696 95.6383 20.6581C95.3135 21.1475 95.1292 21.7621 95.0855 22.5038H98.2209C98.2797 21.8816 98.4868 21.4361 98.8401 21.1694C99.1935 20.9028 99.6788 20.7699 100.297 20.7699C100.576 20.7699 100.838 20.7881 101.081 20.8253C101.323 20.8626 101.537 20.9353 101.721 21.0471C101.905 21.158 102.052 21.3138 102.163 21.5145C102.273 21.7143 102.328 21.9857 102.328 22.3251C102.342 22.652 102.246 22.8986 102.041 23.0697C101.834 23.2408 101.555 23.3708 101.201 23.4587C100.848 23.5486 100.443 23.6155 99.9865 23.6585C99.5297 23.7044 99.0662 23.7646 98.596 23.8372C98.124 23.9118 97.6567 24.0112 97.1941 24.1374C96.7306 24.2626 96.3165 24.4528 95.9565 24.7033C95.5956 24.9566 95.3011 25.293 95.0722 25.7155C94.8443 26.138 94.7303 26.6761 94.7303 27.3271C94.7303 27.9197 94.83 28.4311 95.0285 28.8603C95.2271 29.2914 95.5035 29.646 95.8568 29.928C96.2101 30.2099 96.6223 30.4174 97.0934 30.5512C97.5636 30.684 98.0727 30.751 98.6169 30.751C99.3236 30.751 100.016 30.6468 100.692 30.4403C101.369 30.231 101.959 29.8697 102.46 29.3497C102.474 29.5428 102.5 29.732 102.537 29.9165C102.574 30.101 102.621 30.2835 102.68 30.4604H105.86C105.713 30.2243 105.609 29.8687 105.551 29.3936C105.491 28.9195 105.461 28.4244 105.461 27.9044H105.463ZM102.328 26.0147C102.328 26.1944 102.31 26.4314 102.273 26.7268C102.237 27.0241 102.137 27.3156 101.974 27.6052C101.812 27.8939 101.561 28.1434 101.223 28.3498C100.885 28.5582 100.406 28.6615 99.7871 28.6615C99.5373 28.6615 99.2941 28.6395 99.0586 28.5936C98.823 28.5496 98.6169 28.4712 98.4403 28.3604C98.2636 28.2495 98.124 28.0975 98.0204 27.9044C97.9179 27.7113 97.8656 27.4752 97.8656 27.1942C97.8656 26.8979 97.9179 26.6522 98.0204 26.4601C98.124 26.268 98.2598 26.1084 98.4298 25.9822C98.5979 25.856 98.7974 25.7566 99.0253 25.682C99.2533 25.6084 99.4851 25.5492 99.7216 25.5043C99.9714 25.4603 100.222 25.4221 100.472 25.3934C100.724 25.3647 100.962 25.3265 101.19 25.2825C101.419 25.2376 101.632 25.1821 101.831 25.1152C102.03 25.0483 102.195 24.9575 102.328 24.838V26.0156V26.0147ZM111.316 15.5232H108.18V18.9681H106.281V21.0796H108.18V27.8604C108.18 28.4387 108.276 28.9052 108.467 29.2608C108.659 29.6164 108.92 29.8916 109.251 30.0838C109.582 30.2769 109.965 30.4059 110.4 30.4718C110.833 30.5378 111.295 30.5722 111.78 30.5722C112.091 30.5722 112.406 30.5646 112.731 30.5512C113.054 30.5359 113.348 30.5072 113.614 30.4613V28.0163C113.466 28.0459 113.312 28.0698 113.15 28.0832C112.988 28.0985 112.819 28.1061 112.643 28.1061C112.114 28.1061 111.759 28.0163 111.583 27.8385C111.407 27.6607 111.319 27.3051 111.319 26.7708V21.0796H113.615V18.9681H111.319V15.5232H111.316ZM124.277 25.4268C124.071 25.0636 123.798 24.7596 123.46 24.5149C123.122 24.2712 122.734 24.0743 122.301 23.9252C121.866 23.778 121.421 23.6528 120.965 23.5486C120.523 23.4444 120.09 23.3478 119.663 23.259C119.235 23.1701 118.856 23.0697 118.525 22.9598C118.194 22.8479 117.927 22.7046 117.72 22.5258C117.513 22.348 117.412 22.1196 117.412 21.8366C117.412 21.5996 117.469 21.4103 117.587 21.2698C117.705 21.1293 117.85 21.0222 118.019 20.9467C118.189 20.8731 118.375 20.8253 118.581 20.8024C118.787 20.7804 118.979 20.7699 119.155 20.7699C119.714 20.7699 120.2 20.877 120.614 21.092C121.025 21.3071 121.254 21.7181 121.296 22.3251H124.278C124.219 21.6139 124.039 21.0251 123.737 20.5577C123.436 20.0912 123.056 19.7175 122.601 19.4355C122.145 19.1535 121.626 18.9538 121.043 18.8352C120.462 18.7167 119.862 18.6575 119.245 18.6575C118.627 18.6575 118.022 18.7129 117.435 18.8228C116.845 18.9347 116.315 19.1277 115.845 19.4021C115.372 19.6764 114.994 20.0501 114.707 20.5242C114.419 20.9983 114.275 21.6063 114.275 22.3471C114.275 22.8508 114.379 23.2781 114.586 23.626C114.79 23.9749 115.064 24.2626 115.401 24.493C115.741 24.7224 116.128 24.9088 116.562 25.0483C116.996 25.1907 117.441 25.3121 117.897 25.4163C119.017 25.6534 119.89 25.8904 120.515 26.1284C121.141 26.3655 121.453 26.7211 121.453 27.1952C121.453 27.4771 121.388 27.7085 121.255 27.8939C121.122 28.0803 120.956 28.2275 120.758 28.3384C120.558 28.4502 120.337 28.5324 120.095 28.5831C119.852 28.6356 119.619 28.6615 119.399 28.6615C119.089 28.6615 118.792 28.6242 118.505 28.5506C118.217 28.476 117.964 28.3613 117.742 28.2055C117.522 28.0497 117.34 27.8499 117.201 27.6052C117.062 27.3605 116.991 27.069 116.991 26.7268H114.01C114.041 27.4972 114.213 28.1386 114.53 28.65C114.845 29.1614 115.25 29.5724 115.744 29.884C116.237 30.1946 116.801 30.4174 117.435 30.5512C118.066 30.684 118.714 30.751 119.376 30.751C120.038 30.751 120.661 30.6879 121.287 30.5627C121.913 30.4365 122.469 30.2176 122.954 29.906C123.441 29.5953 123.832 29.1843 124.135 28.6729C124.437 28.1606 124.588 27.5278 124.588 26.7717C124.588 26.2374 124.485 25.7901 124.279 25.4278L124.277 25.4268ZM130.504 14.5893L124.542 30.4613H128.031L129.266 26.9266H135.163L136.354 30.4613H139.954L134.059 14.5893H130.503H130.504ZM130.173 24.3266L132.227 18.5026H132.271L134.258 24.3266H130.173ZM150.797 20.5252C150.371 19.9622 149.833 19.5101 149.186 19.1698C148.538 18.8286 147.766 18.6584 146.868 18.6584C146.161 18.6584 145.514 18.7989 144.925 19.0799C144.334 19.3619 143.85 19.814 143.468 20.4363H143.423V18.9681H140.441V34.4855H143.579V29.039H143.622C144.004 29.603 144.495 30.0283 145.092 30.316C145.687 30.6047 146.339 30.75 147.046 30.75C147.885 30.75 148.618 30.5856 149.243 30.2606C149.869 29.9347 150.391 29.4969 150.811 28.9482C151.231 28.3995 151.542 27.7706 151.75 27.0594C151.954 26.3473 152.059 25.6065 152.059 24.8361C152.059 24.0208 151.954 23.2398 151.75 22.4904C151.542 21.743 151.227 21.0863 150.799 20.5233L150.797 20.5252ZM148.789 26.1045C148.699 26.55 148.548 26.938 148.336 27.2716C148.122 27.6052 147.843 27.8767 147.495 28.0832C147.15 28.2906 146.719 28.3957 146.204 28.3957C145.689 28.3957 145.278 28.2915 144.925 28.0832C144.571 27.8767 144.288 27.6052 144.074 27.2716C143.86 26.938 143.706 26.55 143.61 26.1045C143.514 25.6601 143.468 25.2079 143.468 24.7501C143.468 24.2922 143.511 23.8153 143.599 23.3717C143.688 22.9273 143.838 22.5344 144.053 22.1922C144.265 21.8519 144.546 21.5747 144.893 21.3597C145.238 21.1446 145.668 21.0356 146.183 21.0356C146.699 21.0356 147.108 21.1446 147.453 21.3597C147.799 21.5738 148.083 21.8548 148.303 22.2037C148.524 22.5526 148.681 22.9493 148.778 23.3928C148.875 23.8372 148.921 24.2903 148.921 24.7501C148.921 25.2099 148.878 25.661 148.79 26.1045H148.789ZM164.245 22.4924C164.039 21.7449 163.722 21.0882 163.295 20.5252C162.868 19.9622 162.332 19.5101 161.684 19.1698C161.035 18.8286 160.262 18.6584 159.365 18.6584C158.659 18.6584 158.01 18.7989 157.422 19.0799C156.834 19.3619 156.347 19.814 155.964 20.4363H155.922V18.9681H152.94V34.4855H156.076V29.039H156.12C156.503 29.603 156.993 30.0283 157.589 30.316C158.184 30.6047 158.837 30.75 159.543 30.75C160.382 30.75 161.113 30.5856 161.74 30.2606C162.365 29.9347 162.889 29.4969 163.307 28.9482C163.728 28.3995 164.04 27.7706 164.246 27.0594C164.453 26.3473 164.555 25.6065 164.555 24.8361C164.555 24.0208 164.453 23.2398 164.246 22.4904L164.245 22.4924ZM161.285 26.1045C161.198 26.55 161.047 26.938 160.833 27.2716C160.618 27.6052 160.339 27.8767 159.994 28.0832C159.648 28.2906 159.218 28.3957 158.702 28.3957C158.186 28.3957 157.774 28.2915 157.421 28.0832C157.066 27.8767 156.784 27.6052 156.569 27.2716C156.357 26.938 156.202 26.55 156.106 26.1045C156.01 25.6601 155.963 25.2079 155.963 24.7501C155.963 24.2922 156.007 23.8153 156.096 23.3717C156.184 22.9273 156.335 22.5344 156.549 22.1922C156.761 21.8519 157.042 21.5747 157.388 21.3597C157.733 21.1446 158.164 21.0356 158.68 21.0356C159.196 21.0356 159.603 21.1446 159.949 21.3597C160.296 21.5738 160.579 21.8548 160.8 22.2037C161.021 22.5526 161.18 22.9493 161.275 23.3928C161.372 23.8372 161.418 24.2903 161.418 24.7501C161.418 25.2099 161.374 25.661 161.285 26.1045Z"
        fill="#F5F5F5"
      />
    </svg>
  </button>
</div>

<style>
  .testimonio {
    box-shadow: 0px 6px 6px 0px rgba(0, 0, 0, 0.25);
  }
</style>
